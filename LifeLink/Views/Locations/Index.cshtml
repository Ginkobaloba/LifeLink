@model IEnumerable<LifeLink.Models.LocationViewModel>

@{
    ViewBag.Title = "LifeLink - Welcome";
}

<h2>Where would you like to start?</h2>
<div class="col-md-12">
    <span style="inline">
        <a class="btn btn-danger" href='@Url.Action("Create", "Questionnaires")'><span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span>&nbsp; Required Questionnaire</a>
        <a class="btn btn-danger" href="@Url.Action("Index", "Manage")"><span class="glyphicon glyphicon-user" aria-hidden="true"></span>&nbsp; Manage Account</a>
    </span>
</div>


    <div id="map"></div>
    <script>
        function initMap (){
            navigator.geolocation.getCurrentPosition(currentPosition,HomePosition);
        }
        function currentPosition(position) {
            var mapDiv = document.getElementById('map');
            var map = new google.maps.Map(mapDiv, {
                center: {lat: position.coords.latitude , lng: position.coords.longitude},
                zoom: 12
            });
                @foreach (var item1 in Model) {
                <text>
                    var marker = new google.maps.Marker({
                        position: { lat: @item1.LocationLat , lng: @item1.LocationLong},
                        map: map,
                        title: '@item1.Name'
                    });</text> }
            }

        
        function HomePosition(){
            @foreach (var item in Model) {
    <text>
            var mapDiv = document.getElementById('map');
            var map = new google.maps.Map(mapDiv, {
                center: { lat: @item.personlat, lng: @item.personlng},
                map: map,
                title: '@item.Name'
            });</text>
        foreach (var item1 in Model) {
        <text>
            var marker = new google.maps.Marker({
            position: { lat: @item1.LocationLat , lng: @item1.LocationLong},
            map: map,
            title: '@item1.Name'
                        });</text> }
                }
        }

    </script>

    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDPhuvNN439sVvdr5Fpg4maQjMCz-FtAZM&callback=initMap">
    </script>
